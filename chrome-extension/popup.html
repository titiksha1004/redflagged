<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>REDFLAGGED Analysis</title>
    <link rel="stylesheet" href="styles/popup.css">
</head>
<body>
    <div class="popup-container">
        <div class="popup-header">
            <div class="popup-logo">
                <svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                </svg>
                <h1>REDFLAGGED</h1>
            </div>
            <div id="modelStatus" class="popup-header-actions">
                <span class="status-indicator"></span>
                <span class="status-text">AI Ready</span>
            </div>
        </div>

        <div class="popup-content">
            <div class="status-card">
                <div class="status-info">
                    <div class="status-title">Risk Assessment</div>
                    <div id="riskLevel" class="status-description">Not analyzed yet</div>
                </div>
                <div id="riskBadge" class="badge">-</div>
            </div>

            <div class="action-buttons">
                <button id="analyzeButton" class="action-button action-button-primary">
                    <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none">
                        <path d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"/>
                    </svg>
                    Analyze
                </button>
                <button id="highlightButton" class="action-button action-button-primary" disabled>
                    <svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="2" fill="none">
                        <path d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                    </svg>
                    Highlight
                </button>
            </div>

            <div class="red-flags-section">
                <div class="section-header">
                    <span>Detected Issues</span>
                    <span id="redFlagCount" class="badge">0</span>
                </div>
                <div class="section-description">Important clauses that require your attention</div>
                <div class="red-flags-list" id="redFlagsList">
                    <!-- Flag items will be dynamically inserted here -->
                    <div class="empty-message">Run analysis to see results.</div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="popup-footer">
            <button class="action-button action-button-link" id="websiteLinkButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-up-right" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M8.636 3.5a.5.5 0 0 0-.5-.5H1.5A1.5 1.5 0 0 0 0 4.5v10A1.5 1.5 0 0 0 1.5 16h10a1.5 1.5 0 0 0 1.5-1.5V7.864a.5.5 0 0 0-1 0V14.5a.5.5 0 0 1-.5.5h-10a.5.5 0 0 1-.5-.5v-10a.5.5 0 0 1 .5-.5h6.636a.5.5 0 0 0 .5-.5"/>
                    <path fill-rule="evenodd" d="M16 .5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0 0 1h3.793L6.146 9.146a.5.5 0 1 0 .708.708L15 1.707V5.5a.5.5 0 0 0 1 0z"/>
                </svg>
                <span>Visit REDFLAGGED Website</span>
            </button>
        </div>

        <div id="summaryModal" class="modal-overlay">
            <div class="modal">
                <div class="modal-header">
                    <div class="modal-title">Contract Analysis</div>
                    <button class="modal-close" id="closeModalButton">
                        <svg viewBox="0 0 24 24" width="18" height="18" stroke="currentColor" stroke-width="2" fill="none">
                            <path d="M18 6L6 18M6 6l12 12"></path>
                        </svg>
                    </button>
                </div>
                <div class="modal-content" id="summaryContent">
                    <!-- Summary content will be dynamically inserted here -->
                </div>
                <div class="modal-footer">
                    <button id="exportSummaryButton" class="action-button action-button-secondary">Export</button>
                    <button id="closeSummaryButton" class="action-button action-button-primary">Close</button>
                </div>
            </div>
        </div>
    </div>
    <div id="app"></div>
    
    <!-- Load React and ReactDOM libraries -->
    <script src="lib/react.production.min.js"></script>
    <script src="lib/react-dom.production.min.js"></script>
    <script src="lib/react-is.production.min.js"></script>
    <!-- Load styled-components after React -->
    <script src="lib/styled-components.min.js"></script>
    
    <!-- Setup ReactIs for styled-components -->
    <script src="lib/react-is-setup.js"></script>
    
    <!-- Load the popup script after libraries -->
    <script src="popup.js"></script>
</body>
</html>